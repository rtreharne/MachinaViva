{% extends "tool/standalone_base.html" %}
{% block page_title %}Accept invite{% endblock %}
{% block content %}
<div class="standalone-header">
    <div>
        <p class="eyebrow">Invite</p>
        <h2>{{ assignment.title }}</h2>
        <p class="lede">Email: <strong class="monospace">{{ invite.email }}</strong></p>
    </div>
</div>

{% if expired %}
    <div class="alert error">This invite has expired. Ask your instructor to resend.</div>
{% endif %}
{% if invite.accepted_at %}
    <div class="alert success">Invite already accepted on {{ invite.accepted_at }}.</div>
{% endif %}
{% if error %}
    <div class="alert error">{{ error }}</div>
{% endif %}

{% if not expired and not invite.accepted_at %}
    <div class="settings-grid max-two">
        <div class="settings-form-card">
            <div class="settings-card-head">
                <h3 class="settings-title">Create account</h3>
            </div>
            <form method="post" class="settings-grid single-column">
                {% csrf_token %}
                <input type="hidden" name="action" value="register">
                <div class="settings-row">
                    <label for="name">Name</label>
                    <input id="name" name="name" type="text" placeholder="Your name">
                </div>
                <div class="settings-row">
                    <label for="password">Password</label>
                    <input id="password" name="password" type="password" required>
                </div>
                <div class="consent-row">
                    <input id="accept_terms" name="accept_terms" type="checkbox" required {% if accept_terms %}checked{% endif %}>
                    <label for="accept_terms">
                        I have read and accept the <a class="link" href="{% url 'standalone_terms' %}" target="_blank" rel="noopener">Terms and Conditions</a>.
                    </label>
                </div>
                <div class="settings-actions">
                    <button type="submit" class="view-btn">Create account &amp; continue</button>
                </div>
            </form>
        </div>

        <div class="settings-form-card">
            <div class="settings-card-head">
                <h3 class="settings-title">Log in with existing account</h3>
            </div>
            <form method="post" class="settings-grid single-column">
                {% csrf_token %}
                <input type="hidden" name="action" value="login">
                <p class="muted">You must log in with {{ invite.email }}.</p>
                <div class="settings-row">
                    <label for="login-password">Password</label>
                    <input id="login-password" name="password" type="password" required>
                </div>
                <div class="settings-actions">
                    <button type="submit" class="view-btn">Log in &amp; continue</button>
                </div>
            </form>
        </div>
    </div>
{% endif %}
{% endblock %}
